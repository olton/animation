/*!
 * Animation - Library for animating HTML elements.
 * Copyright 2024 by Serhii Pimenov
 * Licensed under MIT
 !*/
!function(){"use strict";const e=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY"],t=["opacity","zIndex"],n=["opacity","volume"],o=["scrollLeft","scrollTop"],r=["backgroundColor","color"],a=["opacity"],_setStyle=(e,t,n,o,r=!1)=>{t=camelCase(t),r&&(n=parseInt(n)),e instanceof HTMLElement?void 0!==e[t]?e[t]=n:e.style[t]="transform"===t||t.toLowerCase().includes("color")?n:n+o:e[t]=n},_getElementTransforms=e=>{if(!e instanceof HTMLElement)return;const t=e.style.transform||"",n=/(\w+)\(([^)]*)\)/g,o=new Map;let r;for(;r=n.exec(t);)o.set(r[1],r[2]);return o},_getColorArrayFromHex=e=>Array.from(/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e||"#000000")).slice(1).map((e=>parseInt(e,16))),_expandColorValue=e=>{const t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;return"#"===e[0]&&4===e.length?"#"+e.replace(t,((e,t,n,o)=>t+t+n+n+o+o)):"#"===e[0]?e:"#"+e},applyProps=function(e,t,n){((e,t,n)=>{each(t,((t,o)=>{_setStyle(e,t,o[0]+o[2]*n,o[3],o[4])}))})(e,t.props,n),((e,t,n)=>{let o=[],r=_getElementTransforms(e);each(t,((e,t)=>{let r=t[0];t[1];let a=t[2],l=t[3];e.includes("rotate")||e.includes("skew")?""===l&&(l="deg"):l=e.includes("scale")?"":"px","turn"===l?o.push(`${e}(${t[1]*n+l})`):o.push(`${e}(${r+a*n+l})`)})),r.forEach(((e,n)=>{void 0===t[n]&&o.push(`${n}(${e})`)})),_setStyle(e,"transform",o.join(" "))})(e,t.transform,n),function(e,t,n){each(t,(function(t,o){let r=[0,0,0];for(let e=0;e<3;e++)r[e]=Math.floor(o[0][e]+o[2][e]*n);_setStyle(e,t,`rgb(${r.join(",")})`)}))}(e,t.color,n)},createAnimationMap=(l,s,i="normal")=>{const c={props:{},transform:{},color:{}};let f,p,u,m,d=_getElementTransforms(l);return each(s,((s,h)=>{const w=e.includes(s),y=t.includes(s),g=r.includes(s);if(Array.isArray(h)&&1===h.length&&(h=h[0]),Array.isArray(h)?(f=g?_getColorArrayFromHex(_expandColorValue(h[0])):parseUnit(h[0]),p=g?_getColorArrayFromHex(_expandColorValue(h[1])):parseUnit(h[1])):(f=w?d.get(s)||0:g?((e,t)=>getComputedStyle(e)[t].replace(/[^\d.,]/g,"").split(",").map((e=>parseInt(e))))(l,s):((e,t,n)=>void 0!==e[t]?o.includes(t)?"scrollLeft"===t?e===window?pageXOffset:e.scrollLeft:e===window?pageYOffset:e.scrollTop:e[t]||0:e.style[t]||getComputedStyle(e,n)[t])(l,s),f=g?f:parseUnit(f),p=g?_getColorArrayFromHex(h):parseUnit(((e,t)=>{const n=/^(\*=|\+=|-=)/.exec(e);if(!n)return e;const o=getUnit(e)||0,r=parseFloat(t),a=parseFloat(e.replace(n[0],""));switch(n[0][0]){case"+":return r+a+o;case"-":return r-a+o;case"*":return r*a+o}})(h,Array.isArray(f)?f[0]:f))),a.includes(s)&&f[0]===p[0]&&(f[0]=p[0]>0?0:1),"reverse"===i&&([p,f]=[f,p]),m=l instanceof HTMLElement&&""===p[1]&&!y&&!w?"px":p[1],g){u=[0,0,0];for(let e=0;e<3;e++)u[e]=p[e]-f[e]}else u=p[0]-f[0];w?c.transform[s]=[f[0],p[0],u,m]:g?c.color[s]=[f,p,u,m]:c.props[s]=[f[0],p[0],u,m,!n.includes(s)]})),c},exec=(e,t,n)=>{let o;if("function"==typeof e)o=e;else if(/^[a-z]+[\w.]*[\w]$/i.test(e)){const t=e.split(".");o=global;for(let e=0;e<t.length;e++)o=o[t[e]]}else o=new Function("a",e);return o.apply(n,t)},camelCase=e=>e.replace(/-([a-z])/g,(e=>e[1].toUpperCase())),each=(e,t)=>{let n=0;if(isArrayLike(e))[].forEach.call(e,(function(e,n){t.apply(e,[n,e])}));else for(let o in e)e.hasOwnProperty(o)&&t.apply(e[o],[o,e[o],n++]);return e},isArrayLike=e=>Array.isArray(e)||"object"==typeof e&&"length"in e&&"number"==typeof e.length,getUnit=(e,t)=>{const n=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);return void 0!==n[1]?n[1]:t},parseUnit=e=>{const t=[0,""];return e=""+e,t[0]=parseFloat(e),t[1]=e.match(/[\d.\-+]*\s*(.*)/)[1]||"",t};function minMax(e,t,n){return Math.min(Math.max(e,t),n)}const l={linear:()=>e=>e};l.default=l.linear;const s={Sine:()=>e=>1-Math.cos(e*Math.PI/2),Circ:()=>e=>1-Math.sqrt(1-e*e),Back:()=>e=>e*e*(3*e-2),Bounce:()=>e=>{let t,n=4;for(;e<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)},Elastic:(e=1,t=.5)=>{const n=minMax(e,1,10),o=minMax(t,.1,2);return e=>0===e||1===e?e:-n*Math.pow(2,10*(e-1))*Math.sin((e-1-o/(2*Math.PI)*Math.asin(1/n))*(2*Math.PI)/o)}};["Quad","Cubic","Quart","Quint","Expo"].forEach(((e,t)=>{s[e]=()=>e=>Math.pow(e,t+2)})),Object.keys(s).forEach((e=>{const t=s[e];l["easeIn"+e]=t,l["easeOut"+e]=(e,n)=>o=>1-t(e,n)(1-o),l["easeInOut"+e]=(e,n)=>o=>o<.5?t(e,n)(2*o)/2:1-t(e,n)(-2*o+2)/2}));const i={fx:!0,elements:{}},c={id:null,el:null,draw:{},dur:1e3,ease:"linear",loop:0,pause:0,dir:"normal",defer:0,onFrame:()=>{},onDone:()=>{}},animate=function(e){return new Promise((function(t){let n,o,{id:r,el:a,draw:s,dur:f,ease:p,loop:u,onFrame:m,onDone:d,pause:h,dir:w,defer:y}=Object.assign({},c,e),g={},b="linear",M=[],x=l.linear,v="alternate"===w?"normal":w,A=!1,k=r||+performance.now()*Math.pow(10,14);if(void 0===(E=a)||null==E)throw new Error("Unknown element!");var E;if("string"==typeof a&&(a=document.querySelector(a)),"function"!=typeof s&&"object"!=typeof s)throw new Error("Unknown draw object. Must be a function or object!");0!==f&&i.fx||(f=1),"alternate"===w&&"number"==typeof u&&(u*=2),"string"==typeof p?(o=/\(([^)]+)\)/.exec(p),b=p.split("(")[0],M=o?o[1].split(",").map((e=>parseFloat(e))):[],x=l[b]):x="function"==typeof p?p:l.linear,i.elements[k]={element:a,id:null,stop:0,pause:0,loop:0};const play=()=>{"object"==typeof s&&(g=createAnimationMap(a,s,v)),n=performance.now(),i.elements[k].loop+=1,i.elements[k].id=requestAnimationFrame(animate)},done=()=>{cancelAnimationFrame(i.elements[k].id),delete i.elements[r],exec(d,null,a),exec(t,[this],a)},animate=e=>{let t,o;const r=i.elements[k].stop;if(r>0)return 2===r&&("function"==typeof s?s.bind(a)(1,1):applyProps(a,g,1)),void done();o=(e-n)/f,o>1&&(o=1),o<0&&(o=0),t=x.apply(null,M)(o),"function"==typeof s?s.bind(a)(o,t):applyProps(a,g,t),exec(m,[o,t],a),o<1&&(i.elements[k].id=requestAnimationFrame(animate)),1===parseInt(o)&&(u?("alternate"===w&&(v="normal"===v?"reverse":"normal"),"boolean"==typeof u||u>i.elements[k].loop?setTimeout((function(){play()}),h):done()):"alternate"!==w||A?done():(v="normal"===v?"reverse":"normal",A=!0,play()))};y>0?setTimeout((()=>{play()}),y):play()}))};i.animate=animate,i.stop=function(e,t=!0){i.elements[e].stop=!0===t?2:1},i.chain=async function chain(e,t){for(let t=0;t<e.length;t++){const n=e[t];n.loop=!1,await animate(n)}("boolean"==typeof t&&t||"number"==typeof t&&--t>0)&&await chain(e,t)},i.easing=l,i.info=()=>{console.info("%c Animation %c v0.3.0 %c 08.05.2024, 13:35:42 ","color: #ffffff; font-weight: bold; background: #468284","color: white; background: darkgreen","color: white; background: #0080fe;")},globalThis.Animation=i,i.info()}();
